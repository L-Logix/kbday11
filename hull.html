<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hull Integrity Control</title>
<style>
  body {
    background:#000;
    color:#0f0;
    font-family:'Share Tech Mono', monospace;
    padding:30px;
    text-align:center;
  }
  #terminal {
    border:1px solid #0f0;
    padding:20px;
    border-radius:8px;
    max-width:600px;
    margin:auto;
    background:#010;
  }
  .line { margin:10px 0; }
  .grid {
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:10px;
    margin-top:20px;
  }
  .panel {
    border:2px solid #0f0;
    text-align:center;
    padding:20px 0;
    border-radius:8px;
    cursor:pointer;
    user-select:none;
    transition:0.2s;
  }
  .panel:hover { background:#030; }
  .locked { pointer-events:none; opacity:0.5; }
  .success { background:#0f0; color:#000; font-weight:bold; }
  .fail { background:#f00; color:#000; font-weight:bold; }
  button {
    background:#000;
    color:#0f0;
    border:1px solid #0f0;
    padding:8px 12px;
    cursor:pointer;
    font-family:monospace;
  }
</style>
</head>
<body>
<div id="terminal">
  <div class="line">> HULL INTEGRITY SYSTEM ONLINE</div>
  <div class="line">> Stabilizers cooling — please wait...</div>
  <div class="line">> TIMER: <span id="timer">45</span> seconds</div>
  
  <div id="grid" class="grid"></div>
  <div id="feedback" class="line"></div>
</div>

<script>
const grid = document.getElementById('grid');
const feedback = document.getElementById('feedback');
const timerDisplay = document.getElementById('timer');
let timer = 45;
let canSelect = false;
const correctPanel = 'C'; // ✅ Correct hull panel

function makeGrid() {
  const letters = ['A','B','C','D','E','F','G','H'];
  for (const l of letters) {
    const div = document.createElement('div');
    div.className = 'panel locked';
    div.textContent = l;
    div.addEventListener('click', ()=>selectPanel(l, div));
    grid.appendChild(div);
  }
}
makeGrid();

function startTimer() {
  feedback.textContent = '> Cooling in progress...';
  timer = 45;
  timerDisplay.textContent = timer;
  const countdown = setInterval(()=>{
    timer--;
    timerDisplay.textContent = timer;
    if (timer <= 0) {
      clearInterval(countdown);
      unlockPanels();
      feedback.textContent = '> Cooling complete — Choose one hull section to seal.';
    }
  },1000);
}

function unlockPanels() {
  canSelect = true;
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('locked'));
}

function lockPanels() {
  canSelect = false;
  document.querySelectorAll('.panel').forEach(p => p.classList.add('locked'));
}

function selectPanel(id, el) {
  if (!canSelect) return;
  if (id === correctPanel) {
    el.classList.add('success');
    feedback.textContent = '> SEAL SUCCESSFUL — HULL INTEGRITY RESTORED.';
    lockPanels();
  } else {
    el.classList.add('fail');
    feedback.textContent = '> SEAL FAILED — SYSTEM COOLING REQUIRED (45s LOCKOUT)';
    lockPanels();
    setTimeout(()=>{
      el.classList.remove('fail');
      startTimer();
    }, 1000); // small delay before restarting
  }
}

startTimer();
</script>
</body>
</html>
